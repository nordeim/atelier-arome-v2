# Task: Phase 8 Cart System Integration

## Objective
Connect frontend cart state to backend Cart API for full persistence.

---

## Completed ✅

### Sub-Phase 8.1: Frontend Types & API Client
- [x] Add Cart types to [types/api.ts](file:///home/project/atelier-arome/atelier-arome-web/src/types/api.ts) (Cart, CartItem, Coupon, request types)
- [x] Add Cart API methods to [api-client.ts](file:///home/project/atelier-arome/atelier-arome-web/src/lib/api-client.ts) with session ID management
- [x] Create [hooks/use-cart.ts](file:///home/project/atelier-arome/atelier-arome-web/src/hooks/use-cart.ts) with TanStack Query (optimistic updates)

### Sub-Phase 8.2: Cart State Management Refactor
- [x] Update [product-detail.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/catalog/product-detail.tsx) with real API call (replaced setTimeout)

### Sub-Phase 8.3: Vial Drawer Refinement
- [x] Refactor [vial-drawer.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/vial-drawer.tsx) with Shadcn Sheet + API hooks
- [x] Create [cart-item.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/cart-item.tsx) atomic component with Gold Leaf ornaments
- [x] Create [cart-loading.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/cart-loading.tsx) skeleton

### Sub-Phase 8.4: Integration
- [x] Create [providers/providers.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/providers/providers.tsx) with QueryClientProvider
- [x] Update [layout.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/app/layout.tsx) to wrap app with Providers

### Verification
- [x] Build passes (`pnpm build`) ✅
- [ ] Run backend tests (optional - backend already complete)
- [ ] Manual E2E testing with live backend

---

## Files Created/Modified

| File | Action |
|------|--------|
| [types/api.ts](file:///home/project/atelier-arome/atelier-arome-web/src/types/api.ts) | ✅ Modified (Cart types) |
| [lib/api-client.ts](file:///home/project/atelier-arome/atelier-arome-web/src/lib/api-client.ts) | ✅ Modified (Cart API methods) |
| [hooks/use-cart.ts](file:///home/project/atelier-arome/atelier-arome-web/src/hooks/use-cart.ts) | ✅ Created (TanStack Query) |
| [components/catalog/product-detail.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/catalog/product-detail.tsx) | ✅ Modified (API call) |
| [components/cart/vial-drawer.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/vial-drawer.tsx) | ✅ Replaced (Shadcn Sheet) |
| [components/cart/cart-item.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/cart-item.tsx) | ✅ Created |
| [components/cart/cart-loading.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/cart/cart-loading.tsx) | ✅ Created |
| [components/providers/providers.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/components/providers/providers.tsx) | ✅ Created |
| [app/layout.tsx](file:///home/project/atelier-arome/atelier-arome-web/src/app/layout.tsx) | ✅ Modified (Providers wrapper) |
